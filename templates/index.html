<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum</title>
    <link rel="stylesheet" href="/style/styles.css"> <!-- CSS dosyasını bağla -->
</head>
<body>
    <div class="header">
        <div class="button-container">
            <button class="nav-button">HTML</button>
            <button class="nav-button">CSS</button>
            <button class="nav-button">PYTHON</button>
            <button class="nav-button">C</button>
            <button class="nav-button">C#</button>
            <button class="nav-button">C++</button>
            <button class="nav-button">GO</button>
            <button class="nav-button">JS</button>
            <button class="nav-button">JAVA</button>
            <button class="nav-button">REACT</button>
            <button class="nav-button">FLUTTER</button>
        </div>
        <div class="sign-in">
            <button class="account-button" onclick="showLogin()">Login</button>
            <button class="account-button" onclick="showRegister()">Register</button>
            <button class="account-button">Hesabım</button>
        </div>
    </div>

    <div class="content">
        <h1>POSTS</h1>
        <div id="posts">
            {{range .Posts}}
                <div class="post">
                    <h2>{{.Title}}</h2>
                    <p>{{.Content}}</p>
                    <div class="post-interactions">
                        <button class="like-button">Like</button>
                        <span class="like-count">0</span>
                        <button class="comment-button">Comment</button>
                        <span class="comment-count">0</span>
                    </div>
                </div>
            {{else}}
                <p>No posts available.</p>
            {{end}}
        </div>
    </div>

    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <div class="login-box">
            <h2>Login</h2>
            <label for="name">Name</label>
            <input type="text" id="name" placeholder="Enter your name">
            <label for="password">Password</label>
            <input type="password" id="password" placeholder="Enter your password">
            <button onclick="submitLogin()">Submit</button>
            <button class="close-button" onclick="closeLogin()">Close</button>
        </div>
    </div>

    <script>
        // Login modal'ı göster
        function showLogin() {
            document.getElementById("loginModal").style.display = "flex";
        }

        // Login modal'ı kapat
        function closeLogin() {
            document.getElementById("loginModal").style.display = "none";
        }

        // Login formunu gönder
        function submitLogin() {
    const name = document.getElementById("name").value;
    const password = document.getElementById("password").value;

    if (name && password) {
        const data = {
            name: name,
            password: password
        };

        fetch('http://localhost:8000/api/v1/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            alert('Login successful!');
            closeLogin();
        })
        .catch((error) => {
            alert('Error: ' + error.message);
        });
    } else {
        alert("Please enter both name and password.");
    }
}

    </script>

        <!-- Register Modal -->
        <div class="Register-modal" id="RegisterModal">
            <div class="Register-box">
                <h2>Register</h2>
                <label for="name">Name</label>
                <input type="text" id="register-name" placeholder="Enter your name">
                <label for="email">Email</label>
                <input type="text" id="register-email" placeholder="Enter your Email">
                <label for="password">Password</label>
                <input type="password" id="register-password" placeholder="Enter your password">
                <button onclick="submitRegister()">Submit</button>
                <button class="close-button" onclick="closeRegister()">Close</button>
            </div>
        </div>

        <script>
            // REGİSTER modal'ı göster
            function showRegister() {
                document.getElementById("RegisterModal").style.display = "flex";
            }
    
            // Register modal'ı kapat
            function closeRegister() {
                document.getElementById("RegisterModal").style.display = "none";
            }
    
            //Register formunu gönder
            function submitRegister() {
        const name = document.getElementById("register-name").value;
        const email = document.getElementById("register-email").value;
        const password = document.getElementById("register-password").value;
    
        if (name && email && password) {
            const data = {
                name: name,
                email:email,
                password: password
            };
    
            fetch('http://localhost:8000/api/v1/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                alert('Register successful!');
                closeRegister();
            })
            .catch((error) => {
                alert('Error: ' + error.message);
            });
        } else {
            alert("Please enter name, email, and password.");

        }
    }
    
        </script>
</body>
</html>
